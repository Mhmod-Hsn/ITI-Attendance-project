<!DOCTYPE html>
<html lang="ar">
    <head>
        <meta charset="UTF-8" />
        <meta
            name="viewport"
            content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0"
        />
        <meta http-equiv="X-UA-Compatible" content="ie=edge" />
        <title>Attendance</title>

        <!-- Font Awesome -->
        <link
            rel="stylesheet"
            href="https://use.fontawesome.com/releases/v5.15.1/css/all.css"
            integrity="sha384-vp86vTRFVJgpjF9jiIGPEEqYqlDwgyBgEF109VFjmqGmIY/Y4HV4d3Gp2irVfcrp"
            crossorigin="anonymous"
        />

        <!-- Chart Js -->
        <link
            rel="stylesheet"
            href="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.4/Chart.min.css"
            integrity="sha512-/zs32ZEJh+/EO2N1b0PEdoA10JkdC3zJ8L5FTiQu82LR9S/rOQNfQN7U59U9BC12swNeRAz3HSzIL2vpp4fv3w=="
            crossorigin="anonymous"
        />

        <link rel="stylesheet" href="./assets/css/style.css" />
        <link rel="icon" href="./favicon.ico" type="image/ico" />

        <!-- <script src="../vendors/fs/fs-jquery.min.js"></script> -->

        <!-- Jquery -->
        <script src="https://code.jquery.com/jquery-3.1.0.js"></script>

        <!-- Popper + Bootstrap -->
        <script
            src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"
            integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN"
            crossorigin="anonymous"
        ></script>
        <script
            src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.min.js"
            integrity="sha384-+YQ4JLhjyBLPDQt//I+STsc9iw4uQqACwlvpslubQzn4u2UU2UFM80nGisd026JF"
            crossorigin="anonymous"
        ></script>

        <!-- Chart Js -->
        <script
            src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.4/Chart.min.js"
            integrity="sha512-d9xgZrVZpmmQlfonhQUvTR7lMPtO7NkZMkA0ABN3PHCbKA5nqylQ/yWlFAyY6hYgdF1Qh6nYiuADWwKB4C2WSw=="
            crossorigin="anonymous"
        ></script>

        <!-- Sweet alert 2 -->
        <script src="https://cdn.jsdelivr.net/npm/sweetalert2@10"></script>

        <script src="./assets/js/script.js"></script>
    </head>
    <body>
        <div
            id="loader"
            class="d-flex align-content-center justify-content-center"
        >
            <div class="loader">
                <div class="inner one"></div>
                <div class="inner two"></div>
                <div class="inner three"></div>
            </div>
        </div>

        <div id="floating-buttons" class="d-flex flex-column">
            <button
                id="dashboard"
                type="button"
                class="btn btn-primary mb-2 shadow admin-only"
                data-toggle="tooltip"
                title="Dashboard"
                data-placement="left"
                onclick="window.location.replace('/')"
            >
                <i class="fas fa-tachometer-alt"></i>
            </button>
            <button
                id="attendance"
                type="button"
                class="btn btn-warning text-white mb-2 shadow admin-only"
                data-toggle="tooltip"
                title="Attendance"
                data-placement="left"
                onclick="window.location.replace('/attendance.html')"
            >
                <i class="fas fa-user-check"></i>
            </button>
            <button
                id="profiles"
                type="button"
                class="btn btn-secondary mb-2 shadow"
                data-toggle="tooltip"
                title="Profiles"
                data-placement="left"
                onclick="window.location.replace('/profile.html')"
            >
                <i class="fas fa-user"></i>
            </button>
            <button
                id="logout"
                type="button"
                class="btn btn-danger mb-2 shadow"
                data-toggle="tooltip"
                title="Logout"
                data-placement="left"
                onclick="logout()"
            >
                <i class="fas fa-sign-in-alt"></i>
            </button>
        </div>

        <div class="container">
            <!-- Main Wrapper start -->
            <div
                id="wrapper"
                class="d-flex align-items-center justify-content-center py-5"
            >
                <div class="card border-primary shadow">
                    <div class="card-body">

<div id="dashboard-page">
    <h4 class="text-center font-weight-bold text-primary text-uppercase mb-3">
        Monthly statistics
    </h4>
    <div class="row">
        <div class="col-md-4">
            <div class="single-statistics bg-primary text-white attendance text-center border shadow py-2 px-3">
                <div class="media d-flex align-items-center justify-content-center">
                    <i class="fas fa-user-check fa-3x"></i>
                    <div class="media-body ml-3 d-flex flex-column align-items-center justify-content-center">
                        <h3 class="mt-0 font-weight-bolder number"></h3>
                        <p class="">Attendance</p>
                    </div>
                </div>
                <div class="progress border" style="height: 5px">
                    <div class="progress-bar bg-primary" role="progressbar" style="width: 0" aria-valuemin="0"
                        aria-valuemax="100"></div>
                </div>
            </div>
        </div>
        <div class="col-md-4">
            <div class="single-statistics bg-warning text-white late text-center border shadow py-2 px-3">
                <div class="media d-flex align-items-center justify-content-center">
                    <i class="fas fa-user-minus fa-3x"></i>
                    <div class="media-body ml-3 d-flex flex-column align-items-center justify-content-center">
                        <h3 class="mt-0 font-weight-bolder number"></h3>
                        <p class="">Late</p>
                    </div>
                </div>
                <div class="progress border" style="height: 5px">
                    <div class="progress-bar bg-warning" role="progressbar" style="width: 0" aria-valuemin="0"
                        aria-valuemax="100"></div>
                </div>
            </div>
        </div>

        <div class="col-md-4">
            <div class="single-statistics bg-danger text-white absence text-center border shadow py-2 px-3">
                <div class="media d-flex align-items-center justify-content-center">
                    <i class="fas fa-user-slash fa-3x"></i>
                    <div class="media-body ml-3 d-flex flex-column align-items-center justify-content-center">
                        <h3 class="mt-0 font-weight-bolder number"></h3>
                        <p class="">Absence</p>
                    </div>
                </div>
                <div class="progress border" style="height: 5px">
                    <div class="progress-bar bg-danger" role="progressbar" style="width: 0" aria-valuemin="0"
                        aria-valuemax="100"></div>
                </div>
            </div>
        </div>
        <div class="col-md-6">
            <div id="todo">
                <h3>todo</h3>
            </div>
        </div>
        <div class="col-md-6">
            <canvas id="myChart" class="my-5" height="250" style="width: 100%"></canvas>
        </div>
    </div>

    <ul class="nav nav-pills flex-row text-center font-weight-bold text-uppercase mb-3" id="pills-tab" role="tablist">
        <li class="nav-item flex-fill px-2" role="presentation">
            <a class="nav-link active" id="pills-all-emps-tab" data-toggle="pill" href="#pills-all-emps" role="tab"
                aria-controls="pills-all-emps" aria-selected="true">All Employees</a>
        </li>
        <li class="nav-item flex-fill px-2" role="presentation">
            <a class="nav-link " id="pills-attendance-tab" data-toggle="pill" href="#pills-attendance" role="tab"
                aria-controls="pills-attendance" aria-selected="false">attendance report</a>
        </li>
        <li class="nav-item flex-fill px-2" role="presentation">
            <a class="nav-link " id="pills-late-tab" data-toggle="pill" href="#pills-late" role="tab"
                aria-controls="pills-late" aria-selected="false">late report</a>
        </li>
        <li class="nav-item flex-fill px-2" role="presentation">
            <a class="nav-link " id="pills-absent-tab" data-toggle="pill" href="#pills-absent" role="tab"
                aria-controls="pills-absent" aria-selected="false">absent report</a>
        </li>
        <li class="nav-item flex-fill px-2" role="presentation">
            <a class="nav-link " id="pills-brief-tab" data-toggle="pill" href="#pills-brief" role="tab"
                aria-controls="pills-brief" aria-selected="false">brief report</a>
        </li>
    </ul>
    <div class="tab-content">
        <div class="tab-pane fade show active" id="pills-all-emps" role="tabpanel" aria-labelledby="pills-all-emps-tab">
            <table id="all-emps-table" class="table my-5 text-center">
                <thead>
                    <tr class="bg-primary text-white">
                        <th scope="col" colspan="4" class="text-center">
                            Employees report about:
                            <span class="month-name"></span>
                        </th>
                    </tr>
                </thead>
                <thead>
                    <tr>
                        <th scope="col">Name</th>
                        <th scope="col">Attendance</th>
                        <th scope="col">Late</th>
                        <th scope="col">Absence</th>
                    </tr>
                </thead>
                <tbody></tbody>
            </table>
        </div>
        <div class="tab-pane fade" id="pills-attendance" role="tabpanel" aria-labelledby="pills-attendance-tab">

            <table id="attend-table" class="table my-5 text-center">
                <thead>
                    <tr class="bg-primary text-white">
                        <th scope="col" colspan="4" class="text-center">
                            Employees report about:
                            <span class="month-name"></span>
                        </th>
                    </tr>
                </thead>
                <thead>
                    <tr>
                        <th scope="col">Name</th>
                        <th scope="col">Attendance</th>
                    </tr>
                </thead>
                <tbody></tbody>
            </table>
        </div>
        <div class="tab-pane fade" id="pills-late" role="tabpanel" aria-labelledby="pills-late-tab">
            <table id="late-table" class="table my-5 text-center">
                <thead>
                    <tr class="bg-primary text-white">
                        <th scope="col" colspan="4" class="text-center">
                            Employees report about:
                            <span class="month-name"></span>
                        </th>
                    </tr>
                </thead>
                <thead>
                    <tr>
                        <th scope="col">Name</th>
                        <th scope="col">Late</th>
                    </tr>
                </thead>
                <tbody></tbody>
            </table>
        </div>
        <div class="tab-pane fade" id="pills-absent" role="tabpanel" aria-labelledby="pills-absent-tab">
            <table id="absent-table" class="table my-5 text-center">
                <thead>
                    <tr class="bg-primary text-white">
                        <th scope="col" colspan="4" class="text-center">
                            Employees report about:
                            <span class="month-name"></span>
                        </th>
                    </tr>
                </thead>
                <thead>
                    <tr>
                        <th scope="col">Name</th>
                        <th scope="col">Absent</th>
                    </tr>
                </thead>
                <tbody></tbody>
            </table>
        </div>
        <div class="tab-pane fade" id="pills-brief" role="tabpanel" aria-labelledby="pills-brief-tab">
            <table id="brief-table" class="table my-5 text-center">
                <thead>
                    <tr class="bg-primary text-white">
                        <th scope="col" colspan="4" class="text-center">
                            Employees report about:
                            <span class="month-name"></span>
                        </th>
                    </tr>
                </thead>
                <thead>
                    <tr>
                        <th scope="col">Name</th>
                        <th scope="col">Absent</th>
                    </tr>
                </thead>
                <tbody></tbody>
            </table>
        </div>
    </div>
</div>

<script>
    window.addEventListener("load", function () {
        checkAuthAdmin()

        fetch(`${API_BASE_URL}/users?role=employee`)
            .then((response) => response.json())
            .then((data) => {
                showDashboardStatistics(data)
            })
    })
</script>

					</div>
				</div>
			</div>
		</div>
		<!-- Main Wrapper end -->

	</body>
</html>
